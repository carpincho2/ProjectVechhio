<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control - Admin</title>
    <link rel="icon" type="image/x-icon" href="logos/favicon_io/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="panel-control.css">
</head>
<body>
    <div class="sidebar">
        <h2><i class="fas fa-cogs"></i> Admin Panel</h2>
        <ul>
            <li><a href="#dashboard" class="nav-link active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="#vehicles" class="nav-link"><i class="fas fa-car"></i> Gestión de Vehículos</a></li>
            <li><a href="#services" class="nav-link"><i class="fas fa-tools"></i> Gestión de Servicios</a></li>
            <li><a href="#finances" class="nav-link"><i class="fas fa-chart-line"></i> Gestión de Finanzas</a></li>
            <li id="nav-users-li" style="display: none;"><a href="#users" id="nav-users" class="nav-link"><i class="fas fa-users-cog"></i> Gestionar Usuarios</a></li>
            <li><a href="index.html"><i class="fas fa-sign-out-alt"></i> Ir al Inicio</a></li>
        </ul>
    </div>
    <div class="main-container">
        <div class="header">
            <div id="auth-container" class="user-auth-section">
                <!-- Este contenido se generará dinámicamente -->
            </div>
        </div>
        <div class="main-content">
            <!-- Sección Dashboard -->
            <div id="dashboard" class="section active">
                <h1><i class="fas fa-tachometer-alt"></i> Resumen del Panel</h1>
                <p>Aquí tienes una vista rápida de las estadísticas y acciones principales.</p>

                <div class="card-container">
                    <div class="card">
                        <h3><i class="fas fa-car"></i> Estadísticas de Vehículos</h3>
                        <div class="stats">
                            <p>Total de vehículos: <span class="stat-value" id="totalVehicles">Cargando...</span></p>
                            <p>Vehículos nuevos: <span class="stat-value" id="newVehicles">Cargando...</span></p>
                            <p>Vehículos usados: <span class="stat-value" id="usedVehicles">Cargando...</span></p>
                        </div>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-tools"></i> Estadísticas de Servicios</h3>
                        <div class="stats">
                            <p>Servicios programados: <span class="stat-value" id="scheduledServices">Cargando...</span></p>
                            <p>Servicios completados: <span class="stat-value" id="completedServices">Cargando...</span></p>
                            <p>Servicios pendientes: <span class="stat-value" id="pendingServices">Cargando...</span></p>
                        </div>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-chart-line"></i> Estadísticas Financieras</h3>
                        <div class="stats" id="finance-stats-container">
                            <p>Solicitudes Totales: <span class="stat-value" id="totalFinanceRequests">Cargando...</span></p>
                            <p>Aprobadas: <span class="stat-value" id="approvedFinances">Cargando...</span></p>
                            <p>Pendientes: <span class="stat-value" id="pendingFinances">Cargando...</span></p>
                            <p>Rechazadas: <span class="stat-value" id="rejectedFinances">Cargando...</span></p>
                        </div>
                        <div id="stats-error" class="error-message" style="display: none; color: red; margin-top: 10px;"></div>
                    </div>
                </div>

                <h2>Acciones Rápidas</h2>
                <div class="card-container">
                    <div class="card">
                        <h3><i class="fas fa-plus-circle"></i> Añadir Nuevo Vehículo</h3>
                        <p>Agregar un nuevo vehículo al inventario o ver la lista de vehiculos.</p>
                        <a href="#vehicles" class="nav-link"><i class="fas fa-arrow-right"></i> Ir a Gestión de Vehículos</a>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-calendar-plus"></i> Ver Servicio</h3>
                        <p>Ver lista de servicios programados.</p>
                        <a href="#services" class="nav-link"><i class="fas fa-arrow-right"></i> Ir a Gestión de Servicios</a>
                    </div>
                    <div class="card">
                        <h3><i class="fas fa-file-invoice-dollar"></i> Ver Financiación</h3>
                        <p>Ver lista de  financiación pendientes o completadas.</p>
                        <a href="#finances" class="nav-link"><i class="fas fa-arrow-right"></i> Ir a Gestión de Finanzas</a>
                    </div>
                </div>
            </div>

            <!-- Sección Vehículos -->
            <div id="vehicles" class="section">
                <h1><i class="fas fa-car"></i> Gestión de Vehículos</h1>
                <div>
                    <h2>Añadir Nuevo Vehículo</h2>
                    <form id="add-vehicle-form">
                        <div class="form-group">
                            <label for="brand">Marca:</label>
                            <select id="brand" name="brand" required>
                                <option value="" disabled selected>Seleccione una marca</option>
                                <option value="Toyota">Toyota</option>
                                <option value="Mercedes">Mercedes</option>
                                <option value="Lexus">Lexus</option>
                                <option value="Ford">Ford</option>
                                <option value="Honda">Honda</option>
                                <option value="McLaren">McLaren</option>
                                <option value="Peugeot">Peugeot</option>
                                <option value="Fiat">Fiat</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="model">Modelo:</label>
                                <select id="model" name="model" required disabled>
                                    <option value="">Seleccione una marca primero</option>
                                </select>
                        </div>
                        <div class="form-group">
                            <label for="year">Año:</label>
                            <input type="number" id="year" name="year" placeholder="Año" required>
                        </div>
                        <div class="form-group">
                            <label for="price">Precio:</label>
                            <input type="number" id="price" name="price" placeholder="Precio" required>
                        </div>
                        <div class="form-group">
                            <label for="condition">Condición:</label>
                            <select id="condition" name="condition" required>
                                <option value="" disabled selected>Seleccionar condición</option>
                                <option value="Nuevo">Nuevo</option>
                                <option value="Usado">Usado</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="image">Imagen:</label>
                            <input type="file" id="image" name="image" accept="image/*">
                        </div>
                        <div class="form-group">
                            <label for="description">Descripción:</label>
                            <textarea id="description" name="description" placeholder="Descripción"></textarea>
                        </div>
                        <button type="submit" class="botonauto"><i class="fas fa-plus"></i> Añadir Vehículo</button>
                    </form>

                    <h2>Listado de Vehículos</h2>
                    <table id="vehicles-table">
                        <thead>
                            <tr>
                                <th>Marca</th>
                                <th>Modelo</th>
                                <th>Año</th>
                                <th>Precio</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Las filas de vehículos se insertarán aquí dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sección Servicios -->
            <div id="services" class="section">
                <h1><i class="fas fa-tools"></i> Gestión de Servicios</h1>
                <div>
                    

                    <h2>Listado de Servicios</h2>
                    <table id="services-table">
                        <thead>
                            <tr>
                                <th>ID de Servicio</th>
                                <th>Nombre del Cliente</th>
                                <th>Vehículo</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Los servicios se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sección Finanzas -->
            <div id="finances" class="section">
                <h1><i class="fas fa-chart-line"></i> Gestión de Finanzas</h1>
                <div>
                    <h2>Listado de Solicitudes de Financiación</h2>
                    <table id="finances-table">
                        <thead>
                            <tr>
                                <th>ID de Solicitud</th>
                                <th>Nombre del Cliente</th>
                                <th>Vehículo</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Los datos de finanzas se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sección Gestionar Usuarios -->
            <div id="users" class="section">
                <h1><i class="fas fa-users-cog"></i> Gestionar Usuarios</h1>
                <table id="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Las filas de usuarios se insertarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Operación realizada con éxito</span>
    </div>

    <!-- Modal para Editar Financiación -->
    <div id="finance-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Editar Estado de Financiación</h2>
            <form id="finance-edit-form">
                <input type="hidden" id="finance-id-input">
                <div class="form-group">
                    <label for="finance-status-select">Estado:</label>
                    <select id="finance-status-select" name="status">
                        <option value="received">Recibido</option>
                        <option value="approved">Aprobado</option>
                        <option value="rejected">Rechazado</option>
                    </select>
                </div>
                <div class="form-group" id="appointment-date-group" style="display: none;">
                    <label for="appointment-date-input">Fecha de la Cita:</label>
                    <input type="datetime-local" id="appointment-date-input" name="appointmentDate">
                </div>
                <button type="submit" class="btn btn-save">Guardar Cambios</button>
            </form>
        </div>
    </div>

    <!-- Modal para Editar Servicio -->
    <div id="service-modal" class="modal">
        <div class="modal-content">
            <span class="service-close-button">&times;</span>
            <h2>Editar Servicio</h2>
            <form id="service-edit-form">
                <input type="hidden" id="service-id-input">
                <div class="form-group">
                    <label for="service-type-select">Tipo:</label>
                    <select id="service-type-select" name="type">
                        <option value="Mantenimiento Preventivo">Mantenimiento Preventivo</option>
                        <option value="Revisión Completa">Revisión Completa</option>
                        <option value="Frenos y Suspensión">Frenos y Suspensión</option>
                        <option value="Cambio de Aceite">Cambio de Aceite</option>
                        <option value="Reparación General">Reparación General</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="service-date-input">Fecha:</label>
                    <input type="datetime-local" id="service-date-input" name="date" required>
                </div>
                <div class="form-group">
                    <label for="service-status-select">Estado:</label>
                    <select id="service-status-select" name="status">
                        <option value="scheduled">Scheduled</option>
                        <option value="completed">Completed</option>
                        <option value="pending">Pending</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-save">Guardar Cambios</button>
            </form>
        </div>
    </div>

    <script type="module" src="panel-control.js"></script>
    <script type="module" src="./main.js" defer></script>
</body>
</html>